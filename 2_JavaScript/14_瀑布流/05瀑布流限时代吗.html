<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			* {
				margin: 0;
				padding: 0;
			}
			
			ul,
			li {
				list-style: none;
			}
			
			ul {
				position: relative;
				margin: 0 auto;
				border: 1px solid black;
			}
			
			li {
				width: 200px;
				background-color: black;
				font-size: 50px;
				text-align: center;
				color: white;
				/*box-sizing: border-box;*/
				position: absolute;
			}
		</style>
	</head>

	<body>
		<ul id="list"></ul>

		<script type="text/javascript">
			var oList = document.getElementById("list");
			var space = 10;
			var winW = document.documentElement.clientWidth;
			var cols = parseInt((winW - space) / (200 + space));
			oList.style.width = space + cols * (200 + space) + "px";
			var arrH = [];
			for (var i = 0; i < cols; i++) {
				arrH[i] = 0;
			}
			for (var i = 0; i < 50; i++) {
				var newLi = document.createElement("li");
				newLi.innerHTML = i;
				newLi.style.height = Math.floor(Math.random() * (200 -100 + 1) + 100) + "px";
				oList.appendChild(newLi);
				var minH = arrH[0];
				var minIndex = 0;
				for (var j = 0; j < arrH.length; j++) {
					if (minH > arrH[j]) {
						minH = arrH[j];
						minIndex = j;
					}
				}
				newLi.style.top = minH + space + "px";
				newLi.style.left = space + minIndex * (200 + space) + "px";
				arrH[minIndex] += space + newLi.offsetHeight;
			}
			var maxH = arrH[0];
			for (var i = 0; i < arrH.length; i++) {
				if (maxH < arrH[i]) {
					maxH = arrH[i];
				}
			}
			oList.style.height = space + maxH + "px";
		</script>

	</body>

</html>